<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinóptico de Simulação de Tanques - Modo Duplo</title>
    <link rel="stylesheet" href="../static/css/styles.css">
    <link rel="stylesheet" href="../static/css/svg-synoptic.css">
</head>

<body>
    <div class="container">
        <header class="header-page">
            <h1>Simulação de Processo de Tanques - Interface Sinóptica</h1>
            <p class="subtitle">Focado em controle MPC em tempo real</p>
        </header>

        <main>
            <!-- Synoptic Board -->
            <section class="synoptic-section">
                <div id="synoptic-board">
                    <!-- SVG will be loaded here -->
                    <div class="placeholder">
                        <p>Diagrama Sinóptico SVG</p>
                        <small>Carregue o diagrama da sua planta aqui</small>
                    </div>
                    <!-- Overlays for real-time data display -->
                    <div id="data-overlays"></div>
                </div>
            </section>

            <!-- Control Panel -->
            <aside class="control-panel">
                <div id="realtime-controls">
                    <h2>Modo Tempo Real</h2>

                    <div class="control-group">
                        <h3>Configuração</h3>
                        <label>
                            Intervalo de atualização da Interface Sinóptica (segundos):
                            <input type="number" id="rt-sampling" value="0.5" min="0.1" max="5" step="0.1">
                        </label>
                        <label style="display: none;">
                            <input type="checkbox" id="rt-enable-noise">
                            Habilitar Ruído de Medição
                        </label>
                    </div>

                    <div class="control-group" style="display: none;">
                        <h3>Ponto de Equilíbrio</h3>
                        <div class="tank-config">
                            <h4>Níveis (m)</h4>
                            <label>Tanque A: <input type="number" id="rt-eq-a-level" value="1.5" step="0.1" min="0"
                                    max="3"></label>
                            <label>Tanque B: <input type="number" id="rt-eq-b-level" value="1.5" step="0.1" min="0"
                                    max="3"></label>
                            <label>Tanque C: <input type="number" id="rt-eq-c-level" value="1.5" step="0.1" min="0"
                                    max="3"></label>
                            <label>Tanque D: <input type="number" id="rt-eq-d-level" value="1.5" step="0.1" min="0"
                                    max="3"></label>
                            <label>Tanque E: <input type="number" id="rt-eq-e-level" value="1.5" step="0.1" min="0"
                                    max="3"></label>
                        </div>
                        <div class="tank-config">
                            <h4>Concentrações (kg/m³)</h4>
                            <label>Tanque C: <input type="number" id="rt-eq-c-conc" value="180" step="10" min="0"
                                    max="360"></label>
                            <label>Tanque D: <input type="number" id="rt-eq-d-conc" value="180" step="10" min="0"
                                    max="360"></label>
                            <label>Tanque E: <input type="number" id="rt-eq-e-conc" value="180" step="10" min="0"
                                    max="360"></label>
                        </div>
                    </div>

                    <button id="initialize-realtime" class="btn-primary">Inicializar</button>
                    <button id="connect-websocket" class="btn-primary" disabled>Conectar</button>

                    <div class="control-group" id="rt-runtime-controls" style="display: none;">
                        <h3>Controles de Execução</h3>
                        <button id="rt-pause" class="btn-secondary" style="display: none;">Pausar</button>
                        <button id="rt-resume" class="btn-secondary" style="display: none;" disabled>Retomar</button>
                        <button id="rt-reset" class="btn-warning" style="display: none;">Resetar</button>
                        <button id="rt-disconnect" class="btn-danger">Desconectar</button>
                    </div>

                    <div class="control-group" id="rt-setpoint-controls" style="display: none;">
                        <h3>Alterar Setpoint</h3>
                        <label>
                            Tanque:
                            <select id="rt-sp-tank">
                                <option value="tank_c">Tanque C</option>
                                <option value="tank_d">Tanque D</option>
                                <option value="tank_e">Tanque E</option>
                            </select>
                        </label>
                        <label>
                            Variável:
                            <select id="rt-sp-variable">
                                <option value="level">Nível</option>
                                <option value="concentration">Concentração</option>
                            </select>
                        </label>
                        <label>
                            Novo Valor:
                            <input type="number" id="rt-sp-value" step="0.1">
                        </label>
                        <button id="rt-send-setpoint" class="btn-secondary">Definir Setpoint</button>
                    </div>

                    <div id="realtime-status" class="status-message"></div>
                </div>
            </aside>
        </main>

        <!-- Data Visualization Panel -->
        <!-- This section must be invisible by default -->
        <section class="data-panel" style="display: none;">
            <h2>Dados do Processo</h2>
            <div id="data-display">
                <h3 class="panel-subtitle">Saídas do Processo (y)</h3>
                <div class="data-grid">
                    <div class="data-card" id="data-tank-c-level">
                        <h3>Nível do Tanque C</h3>
                        <div class="value">--</div>
                        <div class="unit">metros</div>
                    </div>
                    <div class="data-card" id="data-tank-c-conc">
                        <h3>Concentração do Tanque C</h3>
                        <div class="value">--</div>
                        <div class="unit">kg/m³</div>
                    </div>
                    <div class="data-card" id="data-tank-d-level">
                        <h3>Nível do Tanque D</h3>
                        <div class="value">--</div>
                        <div class="unit">metros</div>
                    </div>
                    <div class="data-card" id="data-tank-d-conc">
                        <h3>Concentração do Tanque D</h3>
                        <div class="value">--</div>
                        <div class="unit">kg/m³</div>
                    </div>
                    <div class="data-card" id="data-tank-e-level">
                        <h3>Nível do Tanque E</h3>
                        <div class="value">--</div>
                        <div class="unit">metros</div>
                    </div>
                    <div class="data-card" id="data-tank-e-conc">
                        <h3>Concentração do Tanque E</h3>
                        <div class="value">--</div>
                        <div class="unit">kg/m³</div>
                    </div>
                </div>

                <h3 class="panel-subtitle">Entradas de Controle (u)</h3>
                <div class="data-grid control-grid">
                    <div class="data-card control-card" id="data-tank-a-supply">
                        <h3>Válvula de Suprimento Tanque A</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-b-supply">
                        <h3>Válvula de Suprimento Tanque B</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-c-water">
                        <h3>Bomba de Água Tanque C</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-c-brine">
                        <h3>Bomba de Salmoura Tanque C</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-c-outlet">
                        <h3>Válvula de Saída Tanque C</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-d-water">
                        <h3>Bomba de Água Tanque D</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-d-brine">
                        <h3>Bomba de Salmoura Tanque D</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-d-outlet">
                        <h3>Válvula de Saída Tanque D</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-e-water">
                        <h3>Bomba de Água Tanque E</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-e-brine">
                        <h3>Bomba de Salmoura Tanque E</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                    <div class="data-card control-card" id="data-tank-e-outlet">
                        <h3>Válvula de Saída Tanque E</h3>
                        <div class="value">--</div>
                        <div class="unit">%</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Real-time Trend Charts -->
        <section class="charts-section">
            <h2>Tendências em Tempo Real</h2>

            <div class="chart-row">
                <h3>Níveis dos Tanques (A-E)</h3>
                <div class="chart-wrapper">
                    <canvas id="chart-levels"></canvas>
                </div>
            </div>

            <div class="chart-row">
                <h3>Concentrações dos Tanques (C, D, E)</h3>
                <div class="chart-wrapper">
                    <canvas id="chart-concentrations"></canvas>
                </div>
            </div>

            <div class="chart-row">
                <h3>Ações de Controle</h3>
                <div class="chart-wrapper">
                    <canvas id="chart-controls"></canvas>
                </div>
            </div>
        </section>
    </div>

    <!-- JavaScript Modules -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"
        integrity="sha384-Sse/HDqcypGpyTDpvZOJNnG0TT3feGQUkF9H+mnRvic+LjR+K1NhTt8f51KIQ3v3"
        crossorigin="anonymous"></script>
    <script src="../static/js/charts.js"></script>
    <script src="../static/js/svg-synoptic.js"></script>
    <script src="../static/js/api.js"></script>
    <script src="../static/js/websocket.js"></script>
    <script src="../static/js/ui.js"></script>
    <script src="../static/js/app.js"></script>
</body>

</html>